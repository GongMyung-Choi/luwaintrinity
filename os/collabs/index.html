<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>ë£¨ì›¨ì¸ í˜‘ì—… í”„ë¡œì íŠ¸</title>
<link rel="stylesheet" href="collab_style.css">
<script type="module">
import { fetchCollabs } from "./collab_api.js";

async function renderList() {
  const list = await fetchCollabs();
  const container = document.getElementById("collabList");
  container.innerHTML = list.map(c => `
    <div class="card">
      <h2>${c.title}</h2>
      <p><b>ìœ í˜•:</b> ${c.type} &nbsp;|&nbsp; <b>ë‹´ë‹¹:</b> ${c.persona_name}</p>
      <small>${new Date(c.ts).toLocaleString()}</small>
      <p>${c.detail?.desc || ''}</p>
      <button onclick="location.href='view.html?id=${c.id}'">ìƒì„¸ ë³´ê¸°</button>
    </div>
  `).join("");
}

renderList();
</script>
<!-- header.html ì˜ </head> ë°”ë¡œ ìœ„ìª½ì— ì¶”ê°€ -->
<script src="https://unpkg.com/@supabase/supabase-js@2" defer></script>
<script type="module" src="/scripts/memory_policies.js" defer></script>

</head>
<body>
  <header>
    <h1>ğŸ¤ ë£¨ì›¨ì¸ í˜‘ì—… í”„ë¡œì íŠ¸</h1>
    <p>ëª¨ë“  í¼ìŠ¤ë‚˜ê°€ í•¨ê»˜ ìš¸ë¦° í”ì ë“¤</p>
  </header>
  <main class="main" id="collabList"></main>
</body>
</html>
