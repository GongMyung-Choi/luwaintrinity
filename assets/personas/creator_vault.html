<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1.0" />
<title>ğŸ¨ ì‘í’ˆ ë³´ê´€í•¨ | ë£¨ì›¨ì¸</title>
<style>
:root{--accent:#af2465;}
body{margin:0;font-family:'Noto Sans KR',sans-serif;background:#fafafa;color:#333;}
header{background:var(--accent);color:#fff;text-align:center;padding:18px;font-size:1.4rem;}
.work{background:#fff;border-radius:12px;padding:16px;margin:12px auto;max-width:720px;
  box-shadow:0 2px 6px rgba(0,0,0,0.05);}
.date{color:#888;font-size:.9rem;margin-bottom:6px;}
footer{text-align:center;padding:16px;color:#666;font-size:.85rem;}
button{background:var(--accent);color:#fff;border:none;border-radius:10px;padding:8px 14px;cursor:pointer;}
</style>
</head>
<body>
<header>ğŸ¨ ë‚´ ì‘í’ˆí•¨</header>
<main id="vault" style="padding:20px;text-align:center">ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</main>
<footer>ë£¨ì›¨ì¸ í¼ìŠ¤ë‚˜ ì‹œìŠ¤í…œ Â© 2025</footer>

<script type="module">
import { supabase } from "/assets/js/supabase.js";

const user = JSON.parse(localStorage.getItem("ed_user") || '{"name":"ìµëª…"}');
const box = document.getElementById("vault");

async function loadWorks(){
  const { data, error } = await supabase
    .from("creator_works")
    .select("*")
    .eq("user_name", user.name)
    .order("created_at", { ascending:false });

  if(error){ box.textContent = "âŒ ë¶ˆëŸ¬ì˜¤ê¸° ì˜¤ë¥˜: "+error.message; return; }
  if(!data.length){ box.textContent = "ì•„ì§ ì €ì¥ëœ ì‘í’ˆì´ ì—†ìŠµë‹ˆë‹¤."; return; }

  box.innerHTML = "";
  data.forEach(w=>{
    const div=document.createElement("div");
    div.className="work";
    div.innerHTML=`
      <div class="date">${new Date(w.created_at).toLocaleString()}</div>
      <div>${w.content}</div>
    `;
    box.appendChild(div);
  });
}
loadWorks();
</script>
</body>
</html>
