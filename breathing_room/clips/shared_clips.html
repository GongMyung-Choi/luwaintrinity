ì—¬ê¸´ ì œëª©ì²˜ëŸ¼ ì§¤ë§‰í•œ ì˜ìƒ ì˜¬ë¦¬ëŠ” ê³³ ê·¸ ë­ì§€ í‹±í†¡ ìƒê°í•˜ë©´ ë¨ ê·¼ë° ë°ì´íƒ€ ë² ì´ìŠ¤ ìš©ëŸ‰ì„ ë§ì´ ì¡ì•„ ë¨¹ìœ¼ë‹ˆ ìœ íˆ¬ë¸Œ ê³„ì •ì„ ì‚¬ìš©ìê°€ ë§Œë“¤ì–´ì„œ ê±°ê¸°ì— ë§í¬ ì‹œí‚¤ê³  ì—¬ê¸°ì„  í”„ë ˆì„ ì¸ í”„ë ˆì„ í˜•ì‹ìœ¼ë¡œ ìœ íˆ¬ë¸Œì˜ ë§í¬ëœ ë‚´ìš©ì„ ë³¼ ìˆ˜ ìˆ<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>ê³µìœ  í´ë¦½ ê°¤ëŸ¬ë¦¬ | ìˆ¨ í‹”ì›€ë°©</title>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<style>
body{
  font-family:'Noto Sans KR',sans-serif;
  background:#f7faf9;margin:0;padding:2rem;text-align:center;color:#333;
}
h1{color:#2a9d8f;margin-bottom:1rem;}
#gallery{
  display:flex;flex-wrap:wrap;justify-content:center;gap:1rem;
}
.clip{
  width:320px;background:#fff;border-radius:10px;
  box-shadow:0 2px 6px rgba(0,0,0,.1);
  padding:10px;text-align:left;
}
.clip iframe{width:100%;height:180px;border:none;border-radius:8px;}
.clip .title{color:#af2465;font-weight:bold;margin-top:5px;}
.like{color:#999;cursor:pointer;}
.like.active{color:#e86;}
</style>
</head>
<body>
<h1>ğŸŒ ê³µìœ  í´ë¦½ ê°¤ëŸ¬ë¦¬</h1>
<p>ë£¨ì›¨ì¸ ì‚¬ìš©ìë“¤ì˜ ì˜ìƒ ìš¸ë¦¼ì„ í•¨ê»˜ ê°ìƒí•´ìš”.</p>
<div id="gallery"></div>

<script>
const SUPABASE_URL="https://omchtafaqgkdwcrwscrp.supabase.co";
const SUPABASE_KEY="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9tY2h0YWZhcWdrZHdjcndzY3JwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg4ODIyNjMsImV4cCI6MjA3NDQ1ODI2M30.vGV6Gfgi1V8agiwL03ho2R7BAwv4CrTp6-RGH0S3-4g";
const supabase=window.supabase.createClient(SUPABASE_URL,SUPABASE_KEY);
const gallery=document.getElementById("gallery");

async function loadShared(){
  const {data,error}=await supabase.from("clips_records").select("*").eq("is_shared",true).order("id",{ascending:false});
  if(error)return console.error(error);
  gallery.innerHTML=data.map(c=>`
    <div class="clip" id="clip-${c.id}">
      <iframe src="${c.video_url}" allowfullscreen></iframe>
      <div class="title">${c.title}</div>
      <div class="like" onclick="toggleLike(this)">ğŸ’— ê³µê°í•˜ê¸°</div>
    </div>`).join("");
}
loadShared();

// ì‹¤ì‹œê°„ ë°˜ì˜
supabase.channel("shared_clips_sync")
  .on("postgres_changes",{event:"*",schema:"public",table:"clips_records"},payload=>{
    if(payload.eventType==="DELETE"||payload.eventType==="UPDATE")loadShared();
  }).subscribe();

function toggleLike(el){el.classList.toggle("active");}
</script>
</body>
</html>
ìœ¼ë©´ í•¨ ë¬¼ë¡  ì´ê²ƒë„ ì‚¬ì§„ì²˜ëŸ¼ ì…°ì–´ë“œ íŒŒì¼ ë§Œë“¤ì–´ì„œ ê³µìœ  ë° ì‚­ì œ ì–¸ì œë“  ê°€ëŠ¥í–ˆìœ¼ë©´ í•¨